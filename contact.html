<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Private Consultation - 805 LifeGuard | Schedule Luxury Aquatic Services</title>
    <meta name="description" content="Schedule your private consultation for premium aquatic services. Customized safety and instruction programs for Southern California's distinguished estates.">
    
    <!-- Luxury Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Luxury Theme CSS -->
    <link rel="stylesheet" href="css/luxury-theme.css">
    
    <!-- Preload critical images -->
    <link rel="preload" as="image" href="images/805-lifeguard-logo.png">
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header-top">
            <div class="header-top-content">
                <div class="header-top-left">
                    <i class="fas fa-shield-alt"></i>
                    <span>Licensed, Bonded & Insured Since 2016</span>
                </div>
                <div class="header-top-contact">
                    <a href="tel:+18058051234" aria-label="Call us at 805-805-1234">
                        <i class="fas fa-phone"></i>
                        (805) 805-1234
                    </a>
                    <a href="mailto:concierge@805lifeguard.com" aria-label="Email our concierge team">
                        <i class="fas fa-envelope"></i>
                        concierge@805lifeguard.com
                    </a>
                </div>
            </div>
        </div>
        
        <nav class="navbar">
            <a href="/" class="logo" aria-label="805 LifeGuard Home">
                <img src="images/805-lifeguard-logo.png" alt="805 LifeGuard Premium Logo" class="logo-img">
                <div class="logo-text">
                    <div class="logo-main">805 LifeGuard</div>
                    <div class="logo-subtitle">Premier Aquatic Services</div>
                </div>
            </a>
            
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle mobile menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <ul class="nav-links" id="navLinks" aria-hidden="true">
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="services.html" class="nav-link">Services</a></li>
                <li><a href="pool-cleaning.html" class="nav-link">Pool Cleaning</a></li>
                <li><a href="portfolio.html" class="nav-link">Portfolio</a></li>
                <li><a href="faq.html" class="nav-link">FAQ</a></li>
                <li class="nav-portals">
                    <a href="https://client.805lifeguard.com" class="nav-link portal-link" target="_blank">
                        <i class="fas fa-user-circle"></i>
                        Client Portal
                    </a>
                    <a href="https://admin.805lifeguard.com" class="nav-link admin-link" target="_blank">
                        <i class="fas fa-shield-alt"></i>
                        Admin
                    </a>
                </li>
                <li><a href="contact.html" class="nav-link btn-consultation active">
                    <i class="fas fa-calendar-check"></i>
                    Private Consultation
                </a></li>
            </ul>
        </nav>
    </header>

    <!-- Consultation Form Container -->
    <section class="consultation-container">
        <div class="consultation-form-wrapper">
            <!-- Form Header -->
            <div class="form-header">
                <div class="form-header-content">
                    <div class="form-badge">
                        <i class="fas fa-concierge-bell"></i>
                        Exclusive Consultation Request
                    </div>
                    
                    <h1 class="form-title">Schedule Your Private Consultation</h1>
                    
                    <p class="form-subtitle">
                        Experience the pinnacle of aquatic safety and instruction services. Our concierge team 
                        will create a bespoke service package tailored to your estate's unique requirements 
                        and your family's lifestyle.
                    </p>
                </div>
            </div>
            
            <!-- Form Content -->
            <div class="form-content">
                <!-- Message Alert -->
                <div id="message-alert" class="message-alert"></div>
                
                <!-- Consultation Form -->
                <form id="consultationForm" class="luxury-form" novalidate>
                    <!-- Personal Information -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" class="form-label required">
                                <i class="fas fa-user"></i>
                                First Name
                            </label>
                            <input type="text" id="firstName" name="firstName" class="form-input" required 
                                   placeholder="Your first name" aria-describedby="firstName-error">
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName" class="form-label required">
                                <i class="fas fa-user"></i>
                                Last Name
                            </label>
                            <input type="text" id="lastName" name="lastName" class="form-input" required 
                                   placeholder="Your last name" aria-describedby="lastName-error">
                        </div>
                    </div>
                    
                    <!-- Contact Information -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email" class="form-label required">
                                <i class="fas fa-envelope"></i>
                                Email Address
                            </label>
                            <input type="email" id="email" name="email" class="form-input" required 
                                   placeholder="your@email.com" aria-describedby="email-error">
                        </div>
                        
                        <div class="form-group">
                            <label for="phone" class="form-label required">
                                <i class="fas fa-phone"></i>
                                Phone Number
                            </label>
                            <input type="tel" id="phone" name="phone" class="form-input" required 
                                   placeholder="(805) 555-0123" aria-describedby="phone-error">
                        </div>
                    </div>
                    
                    <!-- Estate Information -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="estateLocation" class="form-label required">
                                <i class="fas fa-map-marker-alt"></i>
                                Estate Location
                            </label>
                            <select id="estateLocation" name="estateLocation" class="form-select" required>
                                <option value="">Select your area</option>
                                <optgroup label="Primary Service Areas">
                                    <option value="thousand-oaks">Thousand Oaks</option>
                                    <option value="westlake-village">Westlake Village</option>
                                    <option value="agoura-hills">Agoura Hills</option>
                                    <option value="newbury-park">Newbury Park</option>
                                    <option value="oak-park">Oak Park</option>
                                </optgroup>
                                <optgroup label="Extended Coverage">
                                    <option value="malibu">Malibu</option>
                                    <option value="calabasas">Calabasas</option>
                                    <option value="hidden-hills">Hidden Hills</option>
                                    <option value="camarillo">Camarillo</option>
                                    <option value="ventura">Ventura</option>
                                </optgroup>
                                <optgroup label="Premium Locations">
                                    <option value="beverly-hills">Beverly Hills</option>
                                    <option value="manhattan-beach">Manhattan Beach</option>
                                    <option value="newport-beach">Newport Beach</option>
                                    <option value="palos-verdes">Palos Verdes</option>
                                    <option value="laguna-beach">Laguna Beach</option>
                                    <option value="other">Other Location</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="propertyType" class="form-label">
                                <i class="fas fa-home"></i>
                                Property Type
                            </label>
                            <select id="propertyType" name="propertyType" class="form-select">
                                <option value="">Select property type</option>
                                <option value="private-estate">Private Estate</option>
                                <option value="gated-community">Gated Community</option>
                                <option value="luxury-residence">Luxury Residence</option>
                                <option value="vacation-property">Vacation Property</option>
                                <option value="corporate-facility">Corporate Facility</option>
                                <option value="event-venue">Event Venue</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Service Selection -->
                    <div class="form-group full-width service-selection">
                        <h3>
                            <i class="fas fa-water"></i>
                            Services of Interest
                            <span style="font-weight: normal; font-size: 0.9rem; color: var(--warm-gray);">(Select all that apply)</span>
                        </h3>
                        
                        <div class="service-options">
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="private-lifeguarding" id="service-lifeguarding">
                                <label for="service-lifeguarding">
                                    <i class="fas fa-shield-alt"></i>
                                    Private Estate Lifeguarding
                                </label>
                            </div>
                            
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="swim-instruction" id="service-instruction">
                                <label for="service-instruction">
                                    <i class="fas fa-swimming-pool"></i>
                                    Bespoke Swimming Instruction
                                </label>
                            </div>
                            
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="event-management" id="service-events">
                                <label for="service-events">
                                    <i class="fas fa-champagne-glasses"></i>
                                    Luxury Event Management
                                </label>
                            </div>
                            
                            <div class="service-option exclusive" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="pool-cleaning" id="service-cleaning">
                                <label for="service-cleaning">
                                    <i class="fas fa-broom"></i>
                                    Exclusive Pool Cleaning
                                    <span class="service-note">Available to lifeguarding/instruction clients</span>
                                </label>
                            </div>
                            
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="water-safety" id="service-safety">
                                <label for="service-safety">
                                    <i class="fas fa-life-ring"></i>
                                    Water Safety Consulting
                                </label>
                            </div>
                            
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="special-needs" id="service-special">
                                <label for="service-special">
                                    <i class="fas fa-heart"></i>
                                    Special Needs Programs
                                </label>
                            </div>
                            
                            <div class="service-option" tabindex="0" role="checkbox" aria-checked="false">
                                <input type="checkbox" name="services[]" value="ongoing-coverage" id="service-ongoing">
                                <label for="service-ongoing">
                                    <i class="fas fa-calendar-alt"></i>
                                    Ongoing Coverage Plans
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Timeline and Urgency -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="timeline" class="form-label">
                                <i class="fas fa-clock"></i>
                                Desired Timeline
                            </label>
                            <select id="timeline" name="timeline" class="form-select">
                                <option value="">Select timeline</option>
                                <option value="immediate">Immediate (Within 1 week)</option>
                                <option value="soon">Soon (1-2 weeks)</option>
                                <option value="month">Within a month</option>
                                <option value="seasonal">Seasonal planning</option>
                                <option value="future">Future planning</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="urgency" class="form-label">
                                <i class="fas fa-exclamation-circle"></i>
                                Priority Level
                            </label>
                            <select id="urgency" name="urgency" class="form-select">
                                <option value="">Select priority</option>
                                <option value="standard">Standard Consultation</option>
                                <option value="priority">Priority Request</option>
                                <option value="urgent">Urgent Need</option>
                                <option value="emergency">Emergency Situation</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Additional Details -->
                    <div class="form-group full-width">
                        <label for="details" class="form-label">
                            <i class="fas fa-comment-alt"></i>
                            Additional Details & Requirements
                        </label>
                        <textarea id="details" name="details" class="form-textarea" rows="4" maxlength="1000"
                                  placeholder="Please share any specific requirements, pool details, family needs, event information, or questions you'd like us to address during your consultation..."></textarea>
                    </div>
                    
                    <!-- Preferred Contact -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="contactMethod" class="form-label">
                                <i class="fas fa-communication"></i>
                                Preferred Contact Method
                            </label>
                            <select id="contactMethod" name="contactMethod" class="form-select">
                                <option value="phone">Phone Call</option>
                                <option value="email">Email</option>
                                <option value="text">Text Message</option>
                                <option value="either">Phone or Email</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactTime" class="form-label">
                                <i class="fas fa-clock"></i>
                                Best Time to Contact
                            </label>
                            <select id="contactTime" name="contactTime" class="form-select">
                                <option value="morning">Morning (8 AM - 12 PM)</option>
                                <option value="afternoon">Afternoon (12 PM - 5 PM)</option>
                                <option value="evening">Evening (5 PM - 8 PM)</option>
                                <option value="anytime">Anytime</option>
                                <option value="weekends">Weekends Only</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Privacy Notice -->
                    <div class="privacy-notice">
                        <h4>
                            <i class="fas fa-lock"></i>
                            Confidentiality & Privacy Commitment
                        </h4>
                        <p>
                            All consultation requests are handled with complete confidentiality. Your information 
                            is securely protected and used solely for providing personalized service recommendations. 
                            We never share client information and maintain the highest standards of discretion 
                            expected by our distinguished clientele.
                        </p>
                    </div>
                    
                    <!-- Submit Section -->
                    <div class="submit-section">
                        <button type="submit" id="submitBtn" class="btn-submit">
                            <i class="fas fa-paper-plane"></i>
                            Submit Consultation Request
                        </button>
                        
                        <p class="submit-note">
                            Our concierge team will review your request and contact you within 4 business hours 
                            to schedule your private consultation.
                        </p>
                    </div>
                    
                    <!-- Alternative Contact -->
                    <div class="alternative-contact">
                        <p><strong>Prefer to speak directly?</strong></p>
                        <a href="tel:+18058051234" class="phone-link">
                            <i class="fas fa-phone"></i>
                            Call (805) 805-1234 Now
                        </a>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--warm-gray);">
                            Available 24/7 for emergency situations and immediate consultation requests.
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Processing Your Request</h3>
            <p>Please wait while we securely submit your consultation request...</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="success-modal">
        <div class="success-modal-content">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Consultation Request Received</h2>
            <p id="successMessage">Thank you for your consultation request. Our concierge team will contact you within 4 business hours.</p>
            
            <div class="consultation-id">
                <strong>Consultation ID:</strong> <span id="consultationIdDisplay">LUXURY-12345</span>
            </div>
            
            <a href="/" class="btn-primary" onclick="closeSuccessModal()">
                <i class="fas fa-home"></i>
                Return to Home
            </a>
            
            <p style="margin-top: 20px; font-size: 0.9rem; color: var(--warm-gray);">
                Keep your consultation ID for reference. You'll also receive a confirmation email shortly.
            </p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section footer-brand">
                    <div class="footer-logo">
                        <img src="images/805-lifeguard-logo.png" alt="805 LifeGuard Logo" class="footer-logo-img">
                        <div>
                            <h3>805 LifeGuard</h3>
                            <p>Premier Aquatic Services</p>
                        </div>
                    </div>
                    <p class="footer-description">
                        Providing exceptional aquatic safety and instruction services to Southern California's 
                        most distinguished estates since 2016. Licensed, bonded, and insured for your peace of mind.
                    </p>
                    <div class="footer-credentials">
                        <div class="credential-badge">
                            <i class="fas fa-certificate"></i>
                            Red Cross Certified
                        </div>
                        <div class="credential-badge">
                            <i class="fas fa-shield-alt"></i>
                            Licensed & Bonded
                        </div>
                        <div class="credential-badge">
                            <i class="fas fa-award"></i>
                            7+ Years Experience
                        </div>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4><i class="fas fa-water"></i> Services</h4>
                    <ul>
                        <li><a href="services.html#lifeguarding">Private Estate Lifeguarding</a></li>
                        <li><a href="services.html#instruction">Bespoke Swimming Instruction</a></li>
                        <li><a href="services.html#events">Luxury Event Management</a></li>
                        <li><a href="pool-cleaning.html">Exclusive Pool Cleaning</a></li>
                        <li><a href="services.html#safety">Water Safety Consulting</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4><i class="fas fa-building"></i> Company</h4>
                    <ul>
                        <li><a href="about.html">About Jasper & Team</a></li>
                        <li><a href="portfolio.html">Client Portfolio</a></li>
                        <li><a href="faq.html">Frequently Asked Questions</a></li>
                        <li><a href="contact.html">Contact & Consultation</a></li>
                        <li><a href="testimonials.html">Client Testimonials</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4><i class="fas fa-map-marker-alt"></i> Service Areas</h4>
                    <div class="service-areas">
                        <div class="area-group">
                            <strong>Primary Coverage:</strong>
                            <ul>
                                <li>Thousand Oaks</li>
                                <li>Westlake Village</li>
                                <li>Agoura Hills</li>
                                <li>Newbury Park</li>
                            </ul>
                        </div>
                        <div class="area-group">
                            <strong>Extended Coverage:</strong>
                            <ul>
                                <li>Malibu & Calabasas</li>
                                <li>Beverly Hills</li>
                                <li>Manhattan Beach</li>
                                <li>Newport Beach</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="footer-section footer-contact">
                    <h4><i class="fas fa-concierge-bell"></i> Concierge Contact</h4>
                    <div class="contact-methods">
                        <a href="tel:+18058051234" class="contact-method priority">
                            <i class="fas fa-phone"></i>
                            <div>
                                <strong>(805) 805-1234</strong>
                                <span>24/7 Emergency Line</span>
                            </div>
                        </a>
                        <a href="mailto:concierge@805lifeguard.com" class="contact-method">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <strong>concierge@805lifeguard.com</strong>
                                <span>Consultation Requests</span>
                            </div>
                        </a>
                        <a href="https://client.805lifeguard.com" class="contact-method portal" target="_blank">
                            <i class="fas fa-user-circle"></i>
                            <div>
                                <strong>Client Portal</strong>
                                <span>Schedule & Account Access</span>
                            </div>
                        </a>
                    </div>
                    
                    <div class="emergency-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <strong>Pool Emergency?</strong>
                            <p>Call (805) 805-1234 immediately. Available 24/7 for existing clients.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="footer-legal">
                        <p>&copy; 2025 805 LifeGuard LLC. All rights reserved.</p>
                        <div class="legal-links">
                            <a href="privacy.html">Privacy Policy</a>
                            <a href="terms.html">Terms of Service</a>
                            <a href="insurance.html">Insurance & Bonding</a>
                        </div>
                    </div>
                    
                    <div class="footer-portals">
                        <a href="https://client.805lifeguard.com" class="portal-link client" target="_blank">
                            <i class="fas fa-user-circle"></i>
                            Client Portal
                        </a>
                        <a href="https://admin.805lifeguard.com" class="portal-link admin" target="_blank">
                            <i class="fas fa-shield-alt"></i>
                            Admin Portal
                        </a>
                    </div>
                    
                    <div class="footer-credentials-compact">
                        <span class="credential">CA Licensed</span>
                        <span class="credential">Bonded & Insured</span>
                        <span class="credential">Background Checked</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript with D1 Database Integration -->
    <script>
        // Form submission handler integrated with Cloudflare D1
        document.getElementById('consultationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const formData = new FormData(form);
            
            // Show loading overlay
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // Collect form data
            const consultationData = {
                first_name: formData.get('firstName'),
                last_name: formData.get('lastName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                estate_location: formData.get('estateLocation'),
                property_type: formData.get('propertyType') || '',
                services: formData.getAll('services[]').join(', '),
                timeframe: formData.get('timeline') || '',
                requirements: formData.get('details') || '',
                client_tier: determineClientTier(formData.get('estateLocation'), formData.get('propertyType')),
                priority_level: formData.get('urgency') || 'standard',
                estimated_value: estimateConsultationValue(formData.getAll('services[]'), formData.get('estateLocation')),
                submission_source: 'website'
            };
            
            try {
                // Submit to your existing Cloudflare Worker endpoint
                const response = await fetch('/api/consultation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(consultationData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    // Hide loading overlay
                    document.getElementById('loadingOverlay').style.display = 'none';
                    
                    // Show success modal with consultation ID
                    document.getElementById('consultationIdDisplay').textContent = result.consultation_id;
                    document.getElementById('successModal').style.display = 'flex';
                    
                    // Reset form
                    form.reset();
                    
                } else {
                    throw new Error('Submission failed');
                }
                
            } catch (error) {
                console.error('Error submitting consultation:', error);
                
                // Hide loading overlay
                document.getElementById('loadingOverlay').style.display = 'none';
                
                // Show error message
                showErrorMessage('There was an error submitting your consultation request. Please try again or call (805) 805-1234 directly.');
            }
        });
        
        // Helper functions for client tier and value estimation
        function determineClientTier(location, propertyType) {
            const premiumLocations = ['beverly-hills', 'manhattan-beach', 'newport-beach', 'malibu', 'hidden-hills'];
            const ultraLuxuryTypes = ['private-estate', 'luxury-residence'];
            
            if (premiumLocations.includes(location) && ultraLuxuryTypes.includes(propertyType)) {
                return 'platinum';
            } else if (premiumLocations.includes(location) || ultraLuxuryTypes.includes(propertyType)) {
                return 'gold';
            } else {
                return 'silver';
            }
        }
        
        function estimateConsultationValue(services, location) {
            const baseValues = {
                'private-lifeguarding': 500,
                'swim-instruction': 300,
                'event-management': 400,
                'pool-cleaning': 200,
                'water-safety': 150,
                'special-needs': 350,
                'ongoing-coverage': 800
            };
            
            const locationMultipliers = {
                'beverly-hills': 2.0,
                'manhattan-beach': 1.8,
                'newport-beach': 1.8,
                'malibu': 1.9,
                'hidden-hills': 1.7,
                'calabasas': 1.5,
                'westlake-village': 1.3,
                'thousand-oaks': 1.2
            };
            
            let totalValue = 0;
            services.forEach(service => {
                totalValue += baseValues[service] || 100;
            });
            
            const multiplier = locationMultipliers[location] || 1.0;
            return Math.round(totalValue * multiplier);
        }
        
        function showErrorMessage(message) {
            const alertDiv = document.getElementById('message-alert');
            alertDiv.innerHTML = `<div class="alert alert-error"><i class="fas fa-exclamation-triangle"></i> ${message}</div>`;
            alertDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function closeSuccessModal() {
            document.getElementById('successModal').style.display = 'none';
        }
        
        // Service option interactivity
        document.querySelectorAll('.service-option').forEach(option => {
            option.addEventListener('click', function() {
                const checkbox = this.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
                this.setAttribute('aria-checked', checkbox.checked);
                
                if (checkbox.checked) {
                    this.classList.add('selected');
                } else {
                    this.classList.remove('selected');
                }
            });
        });
        
        // Pool cleaning service dependency check
        document.getElementById('service-cleaning').addEventListener('change', function() {
            if (this.checked) {
                const lifeguarding = document.getElementById('service-lifeguarding');
                const instruction = document.getElementById('service-instruction');
                
                if (!lifeguarding.checked && !instruction.checked) {
                    alert('Pool cleaning services are exclusively available to clients who also utilize our lifeguarding or swimming instruction services. Please select one of these primary services as well.');
                    this.checked = false;
                    this.closest('.service-option').classList.remove('selected');
                    this.closest('.service-option').setAttribute('aria-checked', 'false');
                }
            }
        });
        
        // Auto-populate service based on URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const serviceParam = urlParams.get('service');
        if (serviceParam) {
            const serviceMapping = {
                'lifeguarding': 'service-lifeguarding',
                'instruction': 'service-instruction',
                'events': 'service-events',
                'pool-cleaning': 'service-cleaning'
            };
            
            const serviceId = serviceMapping[serviceParam];
            if (serviceId) {
                const checkbox = document.getElementById(serviceId);
                const option = checkbox.closest('.service-option');
                checkbox.checked = true;
                option.classList.add('selected');
                option.setAttribute('aria-checked', 'true');
            }
        }
    </script>
</body>
</html>